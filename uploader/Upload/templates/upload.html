{% extends "base.html" %}

{% block content %}

  <div class="container mt-5">

    <h2>Import Into Archivematica</h2>

    {% if transfer_directory|length: %}
      <table>
        <tr>
          <td>File count: </td>
          <td><code>{{ transfer_file_count }}</code> <span class="text-muted small">(including generated metadata)</span></td>
        </tr>
        <tr>
          <td>Total size of files: </td>
          <td><code>{{ transfer_total_file_size|filesizeformat }}</code></td>
        </tr>
      </table>
      <br/>

      <p><a href="/files/preview">Preview file permission metadata</a></p>

      {% if transfer_source_dir or division_options|length > 0: %}
        <form action="{{ url_for('upload.index') }}" method="POST">
          {% if not transfer_source_dir and division_options|length > 0: %}
            <div>
              <select title="division_id" name="division_id">
                <option value="">[choose division]</option>
                {% for division in division_options: %}
                  <option value="{{division["id"]}}" {{ "selected" if request.form['division_id'] == division["id"] }}>{{division["name"]}}</option>
                {% endfor %}
              </select>
            </div>
          {% endif %}

          <input name="transfer_name" value="{{transfer_name}}" placeholder="Transfer name" />
          <input type="submit" value="Import" class="btn btn-primary"/>
        </form>
      {% else %}
        <b>No transfer source directory available.</b>
      {% endif %}

    {% else %}
      <p>No research data directory specified yet.</p>
    {% endif %}
  </div>

{% endblock %}
